{"ast":null,"code":"import _objectSpread from \"/Users/jackmoran/Documents/Personal Projects/movies-list/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _toConsumableArray from \"/Users/jackmoran/Documents/Personal Projects/movies-list/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/jackmoran/Documents/Personal Projects/movies-list/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jackmoran/Documents/Personal Projects/movies-list/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jackmoran/Documents/Personal Projects/movies-list/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jackmoran/Documents/Personal Projects/movies-list/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jackmoran/Documents/Personal Projects/movies-list/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/jackmoran/Documents/Personal Projects/movies-list/src/components/movies.jsx\";\nimport React, { Component } from \"react\";\nimport MoviesTable from \"./moviesTable\";\nimport ListGroup from \"./common/listGroup\";\nimport Pagination from \"./common/pagination\";\nimport { getMovies } from \"../services/fakeMovieService\";\nimport { getGenres } from \"../services/fakeGenreService\";\nimport { paginate } from \"../utils/paginate\";\nimport { Link } from \"react-router-dom\";\nimport _ from \"../../node_modules/lodash\";\n\nvar Movies = /*#__PURE__*/function (_Component) {\n  _inherits(Movies, _Component);\n\n  function Movies() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Movies);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Movies)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      movies: [],\n      genres: [],\n      currentPage: 1,\n      pageSize: 4,\n      sortColumn: {\n        path: \"title\",\n        order: \"asc\"\n      }\n    };\n\n    _this.handleDelete = function (movie) {\n      var movies = _this.state.movies.filter(function (m) {\n        return m !== movie;\n      });\n\n      _this.setState({\n        movies: movies\n      });\n    };\n\n    _this.handleLike = function (movie) {\n      var movies = _toConsumableArray(_this.state.movies);\n\n      var index = movies.indexOf(movie);\n      movies[index] = _objectSpread({}, movies[index]);\n      movies[index].liked = !movies[index].liked;\n\n      _this.setState({\n        movies: movies\n      });\n    };\n\n    _this.handlePageChange = function (page) {\n      _this.setState({\n        currentPage: page\n      });\n    };\n\n    _this.handleGenreSelect = function (genre) {\n      _this.setState({\n        selectedGenre: genre,\n        currentPage: 1\n      });\n    };\n\n    _this.handleSort = function (sortColumn) {\n      _this.setState({\n        sortColumn: sortColumn\n      });\n    };\n\n    _this.getPageData = function () {\n      var _this$state = _this.state,\n          pageSize = _this$state.pageSize,\n          currentPage = _this$state.currentPage,\n          sortColumn = _this$state.sortColumn,\n          selectedGenre = _this$state.selectedGenre,\n          allMovies = _this$state.movies;\n      var filtered = selectedGenre && selectedGenre._id ? allMovies.filter(function (m) {\n        return m.genre._id === selectedGenre._id;\n      }) : allMovies;\n\n      var sorted = _.orderBy(filtered, [sortColumn.path], [sortColumn.order]);\n\n      var movies = paginate(sorted, currentPage, pageSize);\n      return {\n        totalCount: filtered.length,\n        data: movies\n      };\n    };\n\n    return _this;\n  }\n\n  _createClass(Movies, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var genres = [{\n        _id: \"\",\n        name: \"All Genres\"\n      }].concat(_toConsumableArray(getGenres()));\n      this.setState({\n        movies: getMovies(),\n        genres: genres\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var count = this.state.movies.length;\n      var _this$state2 = this.state,\n          pageSize = _this$state2.pageSize,\n          currentPage = _this$state2.currentPage,\n          sortColumn = _this$state2.sortColumn;\n      if (count === 0) return /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"p-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 14\n        }\n      }, \"There are no movies in the database.\");\n\n      var _this$getPageData = this.getPageData(),\n          totalCount = _this$getPageData.totalCount,\n          movies = _this$getPageData.data;\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-3 mt-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(ListGroup, {\n        items: this.state.genres,\n        selectedItem: this.state.selectedGenre,\n        onItemSelect: this.handleGenreSelect,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"p-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }\n      }, \"Showing \", totalCount, \" movies in the database...\"), /*#__PURE__*/React.createElement(Link, {\n        className: \"btn btn-primary mb-4 ms-4\",\n        to: \"/movies/new\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }\n      }, \"Add movie\"), /*#__PURE__*/React.createElement(MoviesTable, {\n        movies: movies,\n        sortColumn: sortColumn,\n        onLike: this.handleLike,\n        onDelete: this.handleDelete,\n        onSort: this.handleSort,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(Pagination, {\n        itemsCount: totalCount,\n        pageSize: pageSize,\n        currentPage: currentPage,\n        onPageChange: this.handlePageChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }\n      })));\n    }\n  }]);\n\n  return Movies;\n}(Component);\n\nexport default Movies;","map":{"version":3,"names":["React","Component","MoviesTable","ListGroup","Pagination","getMovies","getGenres","paginate","Link","_","Movies","state","movies","genres","currentPage","pageSize","sortColumn","path","order","handleDelete","movie","filter","m","setState","handleLike","index","indexOf","liked","handlePageChange","page","handleGenreSelect","genre","selectedGenre","handleSort","getPageData","allMovies","filtered","_id","sorted","orderBy","totalCount","length","data","name","count"],"sources":["/Users/jackmoran/Documents/Personal Projects/movies-list/src/components/movies.jsx"],"sourcesContent":["import React, { Component } from \"react\";\nimport MoviesTable from \"./moviesTable\";\nimport ListGroup from \"./common/listGroup\";\nimport Pagination from \"./common/pagination\";\nimport { getMovies } from \"../services/fakeMovieService\";\nimport { getGenres } from \"../services/fakeGenreService\";\nimport { paginate } from \"../utils/paginate\";\nimport { Link } from \"react-router-dom\";\nimport _ from \"../../node_modules/lodash\";\n\nclass Movies extends Component {\n  state = {\n    movies: [],\n    genres: [],\n    currentPage: 1,\n    pageSize: 4,\n    sortColumn: { path: \"title\", order: \"asc\" },\n  };\n\n  componentDidMount() {\n    const genres = [{ _id: \"\", name: \"All Genres\" }, ...getGenres()];\n    this.setState({ movies: getMovies(), genres });\n  }\n\n  handleDelete = (movie) => {\n    const movies = this.state.movies.filter((m) => m !== movie);\n    this.setState({ movies });\n  };\n\n  handleLike = (movie) => {\n    const movies = [...this.state.movies];\n    const index = movies.indexOf(movie);\n    movies[index] = { ...movies[index] };\n    movies[index].liked = !movies[index].liked;\n    this.setState({ movies });\n  };\n\n  handlePageChange = (page) => {\n    this.setState({ currentPage: page });\n  };\n\n  handleGenreSelect = (genre) => {\n    this.setState({ selectedGenre: genre, currentPage: 1 });\n  };\n\n  handleSort = (sortColumn) => {\n    this.setState({ sortColumn });\n  };\n\n  getPageData = () => {\n    const {\n      pageSize,\n      currentPage,\n      sortColumn,\n      selectedGenre,\n      movies: allMovies,\n    } = this.state;\n\n    const filtered =\n      selectedGenre && selectedGenre._id\n        ? allMovies.filter((m) => m.genre._id === selectedGenre._id)\n        : allMovies;\n\n    const sorted = _.orderBy(filtered, [sortColumn.path], [sortColumn.order]);\n\n    const movies = paginate(sorted, currentPage, pageSize);\n    return { totalCount: filtered.length, data: movies };\n  };\n\n  render() {\n    const { length: count } = this.state.movies;\n    const { pageSize, currentPage, sortColumn } = this.state;\n\n    if (count === 0)\n      return <h4 className=\"p-3\">There are no movies in the database.</h4>;\n\n    const { totalCount, data: movies } = this.getPageData();\n\n    return (\n      <div className=\"row\">\n        <div className=\"col-3 mt-4\">\n          <ListGroup\n            items={this.state.genres}\n            selectedItem={this.state.selectedGenre}\n            onItemSelect={this.handleGenreSelect}\n          />\n        </div>\n        <div className=\"col\">\n          <h4 className=\"p-3\">\n            Showing {totalCount} movies in the database...\n          </h4>\n          <Link className=\"btn btn-primary mb-4 ms-4\" to=\"/movies/new\">\n            Add movie\n          </Link>\n          <MoviesTable\n            movies={movies}\n            sortColumn={sortColumn}\n            onLike={this.handleLike}\n            onDelete={this.handleDelete}\n            onSort={this.handleSort}\n          />\n          <Pagination\n            itemsCount={totalCount}\n            pageSize={pageSize}\n            currentPage={currentPage}\n            onPageChange={this.handlePageChange}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Movies;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}